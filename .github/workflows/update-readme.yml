name: ðŸ§  Update GitHub Metrics

on:
  schedule:
    - cron: "0 9 * * 1"   # lunes 09:00 UTC
  workflow_dispatch:

jobs:
  metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write   # ðŸ‘ˆ necesario para escribir en el repo

    steps:
      - name: Generate metrics
        uses: lowlighter/metrics@latest
        with:
          # --- AutenticaciÃ³n ---
          token: ${{ secrets.METRICS_TOKEN }}             # para leer tus datos
          committer_token: ${{ secrets.METRICS_TOKEN }}   # ðŸ‘ˆ usa TU PAT para hacer el commit
          committer_branch: main                          # rama destino
          # --- Config bÃ¡sica ---
          user: xavki
          template: classic
          base: header, activity, community, repositories, metadata
          config_timezone: Europe/Madrid
          # --- Plugins que quieras ---
          plugin_languages: yes
          plugin_achievements: yes
          plugin_repositories: yes
          # --- Salida ---
          filename: github-metrics.svg
          output_action: commit                           # escribe directamente el archivo
